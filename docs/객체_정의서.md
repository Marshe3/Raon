# 객체 정의서

| 주제명 : | Raon - AI 면접 연습 플랫폼 |
| :---: | :---- |

|        2025. 11. 29.  |
| :---: |

---

## 1. 개요

본 문서는 요구사항 정의서를 바탕으로 데이터베이스 설계를 위한 개체(Entity)와 속성(Attribute)을 정의합니다.

요구사항 문장에서 데이터베이스에 저장할 가치가 있는 중요 데이터(명사)를 추출하고, 이를 개체와 속성으로 분류합니다.

---

## 2. 개체 및 속성 분류

### 2.1 사용자 관리 도메인

#### **개체: User (사용자)**

**설명**: 소셜 로그인을 통해 가입한 사용자

**추출된 명사**: 사용자, 이메일, 소셜 타입, 소셜 ID, 닉네임, 프로필 이미지, 가입일, 마지막 로그인, 탈퇴일

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| user_id | 사용자 ID | BIGINT | 사용자 고유 식별자 | PK, AUTO_INCREMENT |
| email | 이메일 | VARCHAR(100) | 사용자 이메일 주소 | UNIQUE |
| social_type | 소셜 타입 | VARCHAR(20) | 소셜 로그인 유형 (KAKAO, GOOGLE) | NOT NULL |
| social_id | 소셜 ID | VARCHAR(255) | 소셜 제공자 고유 식별자 | UNIQUE, NOT NULL |
| nickname | 닉네임 | VARCHAR(50) | 사용자 닉네임 | |
| profile_image | 프로필 이미지 | VARCHAR(500) | 프로필 이미지 URL | |
| join_date | 가입일 | DATETIME | 회원 가입 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| last_login | 마지막 로그인 | DATETIME | 최근 접속 시간 | NOT NULL |
| deleted_at | 탈퇴일 | DATETIME | 회원 탈퇴 일시 (소프트 삭제) | |
| created_at | 생성일시 | DATETIME | 레코드 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 레코드 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

---

#### **개체: RefreshToken (리프레시 토큰)**

**설명**: JWT Refresh Token 관리

**추출된 명사**: 토큰, 만료일시

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| id | 토큰 ID | BIGINT | 토큰 고유 식별자 | PK, AUTO_INCREMENT |
| user_id | 사용자 ID | BIGINT | 사용자 고유 번호 | FK (User), UNIQUE, NOT NULL |
| token | 토큰 | VARCHAR(500) | AES 암호화된 Refresh Token | NOT NULL |
| expires_at | 만료일시 | DATETIME | 토큰 만료 일시 | NOT NULL |
| created_at | 생성일시 | DATETIME | 토큰 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |

---

### 2.2 이력서 관리 도메인

#### **개체: Resume (이력서)**

**설명**: 사용자가 작성한 이력서

**추출된 명사**: 이력서, 제목, 이름, 전화번호, 이메일, 희망 직무, 기술/역량, 기본 이력서 여부

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| resume_id | 이력서 ID | BIGINT | 이력서 고유 식별자 | PK, AUTO_INCREMENT |
| user_id | 사용자 ID | BIGINT | 이력서 작성자 | FK (User), NOT NULL |
| title | 제목 | VARCHAR(100) | 이력서 제목 | NOT NULL |
| name | 이름 | VARCHAR(50) | 지원자 이름 | NOT NULL |
| phone | 연락처 | VARCHAR(20) | 전화번호 | |
| email | 이메일 | VARCHAR(100) | 이메일 주소 | |
| desired_position | 희망 직무 | VARCHAR(100) | 지원 희망 직무 | |
| skills | 기술/역량 | TEXT | 보유 기술 및 역량 | |
| is_default | 기본 이력서 여부 | BOOLEAN | 기본 이력서 설정 여부 | NOT NULL, DEFAULT FALSE |
| created_at | 생성일시 | DATETIME | 이력서 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 이력서 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

**비즈니스 규칙**: 사용자당 최대 5개, 기본 이력서는 1개만 설정 가능

---

#### **개체: Education (학력)**

**설명**: 이력서의 학력 정보

**추출된 명사**: 학력 구분, 학교명, 전공, 재학기간, 졸업 상태, 학점, 정렬 순서

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| education_id | 학력 ID | BIGINT | 학력 고유 식별자 | PK, AUTO_INCREMENT |
| resume_id | 이력서 ID | BIGINT | 소속 이력서 | FK (Resume), NOT NULL, ON DELETE CASCADE |
| education_type | 학력 구분 | VARCHAR(50) | 고등학교/대학교/대학원 등 | NOT NULL |
| school_name | 학교명 | VARCHAR(100) | 학교 이름 | NOT NULL |
| major | 전공 | VARCHAR(100) | 전공 분야 | |
| attendance_period | 재학기간 | VARCHAR(50) | 재학 기간 (예: 2018.03 ~ 2022.02) | |
| status | 상태 | VARCHAR(20) | 졸업/재학중/중퇴/수료 | |
| gpa | 학점 | VARCHAR(20) | 학점 정보 (예: 4.0/4.5) | |
| order_index | 정렬 순서 | INT | 여러 학력 정렬용 인덱스 | NOT NULL, DEFAULT 0 |
| created_at | 생성일시 | DATETIME | 레코드 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 레코드 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

---

#### **개체: Career (경력)**

**설명**: 이력서의 경력 정보

**추출된 명사**: 회사명, 직무/직책, 근무기간, 재직중 여부, 담당업무, 성과, 정렬 순서

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| career_id | 경력 ID | BIGINT | 경력 고유 식별자 | PK, AUTO_INCREMENT |
| resume_id | 이력서 ID | BIGINT | 소속 이력서 | FK (Resume), NOT NULL, ON DELETE CASCADE |
| company_name | 회사명 | VARCHAR(100) | 근무 회사 이름 | NOT NULL |
| position | 직무/직책 | VARCHAR(100) | 담당 직무 또는 직책 | NOT NULL |
| employment_period | 근무기간 | VARCHAR(50) | 근무 기간 (예: 2020.03 ~ 2022.12) | |
| is_current | 재직중 여부 | BOOLEAN | 현재 재직중인지 여부 | NOT NULL, DEFAULT FALSE |
| responsibilities | 담당업무 | TEXT | 주요 담당 업무 상세 설명 | |
| achievements | 성과 | TEXT | 업무 성과 및 기여도 | |
| order_index | 정렬 순서 | INT | 여러 경력 정렬용 인덱스 | NOT NULL, DEFAULT 0 |
| created_at | 생성일시 | DATETIME | 레코드 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 레코드 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

---

### 2.3 자기소개서 관리 도메인

#### **개체: CoverLetter (자기소개서)**

**설명**: 사용자가 작성한 자기소개서

**추출된 명사**: 자소서, 제목, 내용, 지원 회사, 지원 직무, 기본 자소서 여부

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| cover_letter_id | 자소서 ID | BIGINT | 자소서 고유 식별자 | PK, AUTO_INCREMENT |
| user_id | 사용자 ID | BIGINT | 자소서 작성자 | FK (User), NOT NULL |
| title | 제목 | VARCHAR(100) | 자소서 제목 | NOT NULL |
| content | 내용 | TEXT | 자소서 본문 내용 | NOT NULL |
| company_name | 지원 회사 | VARCHAR(100) | 지원 대상 회사명 (참고용) | |
| position | 지원 직무 | VARCHAR(100) | 지원 희망 직무 (참고용) | |
| is_default | 기본 자소서 여부 | BOOLEAN | 기본 자소서 설정 여부 | NOT NULL, DEFAULT FALSE |
| created_at | 생성일시 | DATETIME | 자소서 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 자소서 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

**비즈니스 규칙**: 사용자당 최대 5개, 기본 자소서는 1개만 설정 가능

---

### 2.4 챗봇 관리 도메인

#### **개체: Chatbot (챗봇)**

**설명**: AI 면접관 아바타 설정 정보

**추출된 명사**: 챗봇, 챗봇 이름, 설명, 모델 스타일, TTS 타입, LLM 타입, STT 타입, 프롬프트 ID, 문서 ID, 활성화 여부, 공개 여부

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| chatbot_id | 챗봇 ID | BIGINT | 챗봇 고유 식별자 | PK, AUTO_INCREMENT |
| chatbot_name | 챗봇 이름 | VARCHAR(100) | 챗봇(면접관) 이름 | NOT NULL |
| description | 설명 | TEXT | 챗봇 설명 | |
| model_style | 모델 스타일 | VARCHAR(50) | 챗봇 대화 스타일 | |
| tts_type | TTS 타입 | VARCHAR(50) | 음성 합성 모델 (예: k_idol_m_2_zino) | |
| llm_type | LLM 타입 | VARCHAR(50) | 언어 모델 (예: azure-gpt-4o) | |
| stt_type | STT 타입 | VARCHAR(50) | 음성 인식 모델 (예: whisper) | |
| prompt_id | 프롬프트 ID | VARCHAR(100) | PersoAI 프롬프트 ID (plp-*) | |
| document_id | 문서 ID | VARCHAR(100) | PersoAI 문서 ID (pld-*) | |
| is_active | 활성화 여부 | BOOLEAN | 챗봇 활성화 상태 | NOT NULL, DEFAULT TRUE |
| is_public | 공개 여부 | BOOLEAN | 공개 챗봇 여부 | NOT NULL, DEFAULT TRUE |
| created_at | 생성일시 | DATETIME | 챗봇 등록 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| updated_at | 수정일시 | DATETIME | 챗봇 정보 최종 수정 일시 | NOT NULL, ON UPDATE CURRENT_TIMESTAMP |

---

#### **개체: ChatRoom (채팅방)**

**설명**: AI 챗봇과의 대화 세션

**추출된 명사**: 채팅방, PersoAI 세션 ID

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| chat_id | 채팅방 ID | BIGINT | 채팅방 고유 식별자 | PK, AUTO_INCREMENT |
| perso_session_id | PersoAI 세션 ID | VARCHAR(255) | PersoAI API 세션 식별자 | UNIQUE, NOT NULL |
| created_at | 생성일시 | DATETIME | 채팅방 생성 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |

---

#### **개체: Message (메시지)**

**설명**: 채팅방의 개별 메시지

**추출된 명사**: 메시지, 역할, 내용

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| message_id | 메시지 ID | BIGINT | 메시지 고유 식별자 | PK, AUTO_INCREMENT |
| chat_id | 채팅방 ID | BIGINT | 소속 채팅방 | FK (ChatRoom), NOT NULL, ON DELETE CASCADE |
| role | 역할 | VARCHAR(20) | 메시지 발신자 (user/assistant/system) | NOT NULL |
| content | 내용 | TEXT | 메시지 본문 | NOT NULL |
| created_at | 생성일시 | DATETIME | 메시지 전송 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |

---

### 2.5 학습 기록 도메인

#### **개체: InterviewFeedback (면접 피드백)**

**설명**: AI 면접 연습 후 받은 피드백 및 학습 성장도 추적

**추출된 명사**: 피드백, 점수, 피드백 요약, 면접 종류, 면접 일시

| 속성명 | 한글명 | 데이터 타입 | 설명 | 제약조건 |
|--------|--------|-------------|------|----------|
| feedback_id | 피드백 ID | BIGINT | 피드백 고유 식별자 | PK, AUTO_INCREMENT |
| user_id | 사용자 ID | BIGINT | 면접 연습자 | FK (User), NOT NULL |
| chat_id | 채팅방 ID | BIGINT | 관련 채팅방 | FK (ChatRoom), ON DELETE SET NULL |
| score | 점수 | DECIMAL(5,2) | 면접 평가 점수 (0.00 ~ 100.00) | NOT NULL |
| feedback_summary | 피드백 요약 | TEXT | AI 피드백 전체 JSON 내용 (5개 섹션별 평가) | |
| interview_type | 면접 종류 | VARCHAR(100) | 면접 유형 (백엔드 개발자, 게임 개발자 등) | DEFAULT '일반 면접' |
| interview_date | 면접 일시 | DATETIME | 면접 실시 일시 | NOT NULL |
| created_at | 생성일시 | DATETIME | 피드백 저장 일시 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |

**비즈니스 규칙**:
- 면접 완료 시 Gemini AI 피드백 자동 저장
- 5개 섹션별 평가: 적합성, 구체성, 논리성, 진정성, 차별성
- 시간대별 점수 추이 그래프 제공
- 면접 종류별 필터링 지원

---

## 3. 개체 간 관계 정의

### 3.1 관계 다이어그램

```
User (1) ──────< (N) Resume
              │
              ├──< (N) Education
              └──< (N) Career

User (1) ──────< (N) CoverLetter

User (1) ──────  (1) RefreshToken

User (1) ──────< (N) InterviewFeedback

ChatRoom (1) ──────< (N) Message
         └──────  (1) InterviewFeedback (선택적)

Chatbot (독립 개체)
```

### 3.2 관계 상세 명세

| 부모 개체 | 관계 유형 | 자식 개체 | Cardinality | 설명 | 삭제 규칙 |
|-----------|-----------|-----------|-------------|------|-----------|
| User | 1:N | Resume | 한 사용자는 여러 이력서를 작성할 수 있다 (최대 5개) | 사용자 삭제 시 연관 데이터 유지 (소프트 삭제) | NO ACTION |
| Resume | 1:N | Education | 한 이력서는 여러 학력 정보를 포함한다 | 이력서 삭제 시 학력 정보도 삭제 | CASCADE |
| Resume | 1:N | Career | 한 이력서는 여러 경력 정보를 포함한다 | 이력서 삭제 시 경력 정보도 삭제 | CASCADE |
| User | 1:N | CoverLetter | 한 사용자는 여러 자소서를 작성할 수 있다 (최대 5개) | 사용자 삭제 시 연관 데이터 유지 (소프트 삭제) | NO ACTION |
| User | 1:1 | RefreshToken | 한 사용자는 하나의 리프레시 토큰을 가진다 | 사용자 삭제 시 토큰도 삭제 | CASCADE |
| User | 1:N | InterviewFeedback | 한 사용자는 여러 면접 피드백 기록을 가진다 | 사용자 삭제 시 연관 데이터 유지 (소프트 삭제) | NO ACTION |
| ChatRoom | 1:N | Message | 한 채팅방은 여러 메시지를 포함한다 | 채팅방 삭제 시 메시지도 삭제 | CASCADE |
| ChatRoom | 1:1 | InterviewFeedback | 한 채팅방은 하나의 피드백 기록을 가질 수 있다 (선택적) | 채팅방 삭제 시 피드백의 chat_id를 NULL로 설정 | SET NULL |

---

## 4. 주요 비즈니스 규칙

### 4.1 데이터 제약사항

| 개체 | 제약사항 | 설명 |
|------|----------|------|
| Resume | 사용자당 최대 5개 | 한 사용자는 최대 5개의 이력서를 작성할 수 있다 |
| Resume | 기본 이력서 1개 | 사용자당 기본 이력서는 1개만 설정 가능 |
| CoverLetter | 사용자당 최대 5개 | 한 사용자는 최대 5개의 자소서를 작성할 수 있다 |
| CoverLetter | 기본 자소서 1개 | 사용자당 기본 자소서는 1개만 설정 가능 |
| RefreshToken | 사용자당 1개 | 한 사용자는 하나의 리프레시 토큰만 보유 |
| User | 이메일 중복 불가 | 이메일은 UNIQUE 제약조건 |
| User | 소셜 ID 중복 불가 | 소셜 ID는 UNIQUE 제약조건 |
| ChatRoom | PersoAI 세션 ID 중복 불가 | PersoAI 세션 ID는 UNIQUE 제약조건 |
| InterviewFeedback | 점수 범위 | 0.00 ~ 100.00 (소수점 2자리) |

### 4.2 데이터 흐름 규칙

1. **사용자 가입 흐름**
   - User 생성 → RefreshToken 생성

2. **이력서 작성 흐름**
   - User → Resume 생성 → Education/Career 추가

3. **면접 연습 흐름**
   - User → ChatRoom 생성 → Message 교환 → InterviewFeedback 저장

4. **학습 기록 조회 흐름**
   - User → InterviewFeedback 조회 (면접 종류별 필터링, 시간대별 정렬)

---

## 5. 데이터 타입 및 크기 정의 근거

| 데이터 타입 | 사용 개체 | 선택 근거 |
|-------------|-----------|-----------|
| BIGINT | 모든 ID 컬럼 | 대용량 데이터 지원, 충분한 범위 제공 |
| VARCHAR(20-100) | 이름, 제목 등 짧은 텍스트 | 적절한 길이 제한으로 데이터 무결성 보장 |
| VARCHAR(255-500) | URL, 소셜 ID 등 긴 문자열 | 외부 시스템 ID 및 URL 저장에 충분한 크기 |
| TEXT | 긴 내용 (자소서, 피드백 등) | 길이 제한 없는 긴 텍스트 저장 |
| DATETIME | 모든 날짜/시간 | 시간대 정보 포함, 정확한 시간 추적 |
| BOOLEAN | is_* 플래그 | 참/거짓 상태 표현 |
| DECIMAL(5,2) | 점수 | 소수점 2자리까지 정확한 점수 표현 (0.00 ~ 999.99) |

---

**문서 작성일**: 2025.11.29
**작성자**: Claude
**버전**: 1.0
